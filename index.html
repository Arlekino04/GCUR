<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ЦУР - Прыжки</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body, html {
            width: 100%;
            height: 100%;
            overflow: hidden;
            font-family: 'Montserrat', sans-serif;
            touch-action: manipulation;
        }
        
        #game-container {
            position: relative;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #2563eb, #06b6d4);
        }
        
        #header {
            position: absolute;
            top: 20px;
            left: 0;
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            z-index: 10;
        }
        
        #logo {
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }
        
        #logo-icon {
            margin-right: 10px;
        }
        
        #score {
            color: white;
            font-size: 18px;
            text-align: center;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
            background-color: rgba(0,0,0,0.2);
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 500;
        }
        
        #player {
            position: absolute;
            width: 40px;
            height: 40px;
            background-color: #45d5ad;
            border-radius: 8px;
            box-shadow: 0 3px 6px rgba(0,0,0,0.2);
            z-index: 5;
            transition: transform 0.1s;
        }
        
        .platform {
            position: absolute;
            height: 12px;
            background-color: rgba(255, 255, 255, 0.9);
            border-radius: 6px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        #start-screen, #win-screen, #game-over-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background-color: rgba(0,0,0,0.85);
            color: white;
            z-index: 20;
            text-align: center;
            padding: 20px;
        }
        
        #big-logo {
            margin-bottom: 30px;
            transform: scale(1.5);
        }
        
        h1 {
            font-size: 36px;
            margin-bottom: 20px;
            font-weight: 700;
        }
        
        p {
            font-size: 18px;
            margin-bottom: 30px;
            line-height: 1.5;
            max-width: 300px;
            font-weight: 400;
        }
        
        button {
            padding: 14px 28px;
            font-size: 18px;
            background: linear-gradient(to right, #45d5ad, #06b6d4);
            color: white;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            font-weight: 600;
            font-family: 'Montserrat', sans-serif;
            transition: all 0.2s;
        }
        
        button:active {
            transform: translateY(2px);
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        #controls {
            position: absolute;
            bottom: 40px;
            left: 0;
            width: 100%;
            display: flex;
            justify-content: space-between;
            padding: 0 30px;
            z-index: 10;
        }
        
        .control-btn {
            width: 70px;
            height: 70px;
            background-color: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-size: 28px;
            user-select: none;
            backdrop-filter: blur(4px);
            -webkit-backdrop-filter: blur(4px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        #left-btn::after {
            content: "←";
        }
        
        #right-btn::after {
            content: "→";
        }
        
        #background-particles {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }
        
        .particle {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.4);
            border-radius: 50%;
            pointer-events: none;
        }
        
        #progress-container {
            position: absolute;
            top: 90px;
            left: 50%;
            transform: translateX(-50%);
            width: 200px;
            height: 6px;
            background-color: rgba(255, 255, 255, 0.2);
            border-radius: 3px;
            overflow: hidden;
            z-index: 10;
        }
        
        #progress-bar {
            height: 100%;
            width: 0%;
            background-color: #45d5ad;
            border-radius: 3px;
            transition: width 0.3s;
        }
        
        .stat {
            display: flex;
            justify-content: space-between;
            width: 250px;
            margin-bottom: 10px;
            font-size: 16px;
            padding: 8px 16px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
        }
        
        .stat-value {
            font-weight: 700;
        }
        
        #confetti {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 19;
        }
        
        .confetti-piece {
            position: absolute;
            width: 10px;
            height: 20px;
            background-color: #45d5ad;
            top: -20px;
            opacity: 0;
        }
    </style>
</head>
<body>
    <div id="game-container">
        <div id="background-particles"></div>
        
        <div id="header">
            <div id="logo">
                <svg id="logo-icon" width="40" height="40" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <!-- Нижний квадрат -->
                    <rect x="10" y="50" width="40" height="40" fill="#FFFFFF" />
                    <path d="M10 50L50 50L10 90L10 50Z" fill="#45d5ad" />
                    
                    <!-- Верхний прямоугольник -->
                    <rect x="40" y="10" width="50" height="50" fill="#FFFFFF" />
                    <path d="M40 10L90 10L40 60L40 10Z" fill="#45d5ad" />
                </svg>
                <span style="color: white; font-size: 18px; font-weight: 600; text-shadow: 1px 1px 2px rgba(0,0,0,0.3);">ЦУР</span>
            </div>
            <div id="score">Очки: 0</div>
            <div id="progress-container">
                <div id="progress-bar"></div>
            </div>
        </div>
        
        <div id="player"></div>
        
        <div id="controls">
            <div id="left-btn" class="control-btn"></div>
            <div id="right-btn" class="control-btn"></div>
        </div>
        
        <div id="confetti"></div>
        
        <div id="start-screen">
            <div id="big-logo">
                <svg width="150" height="80" viewBox="0 0 300 120" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <!-- Логотип -->
                    <g transform="translate(0, 10)">
                        <!-- Нижний квадрат -->
                        <rect x="10" y="50" width="40" height="40" fill="#FFFFFF" />
                        <path d="M10 50L50 50L10 90L10 50Z" fill="#45d5ad" />
                        
                        <!-- Верхний прямоугольник -->
                        <rect x="40" y="10" width="50" height="50" fill="#FFFFFF" />
                        <path d="M40 10L90 10L40 60L40 10Z" fill="#45d5ad" />
                        
                        <!-- Текст -->
                        <text x="100" y="30" fill="white" font-family="Montserrat" font-size="22" font-weight="bold">Центр</text>
                        <text x="100" y="55" fill="white" font-family="Montserrat" font-size="22" font-weight="bold">Управления</text>
                        <text x="100" y="80" fill="white" font-family="Montserrat" font-size="22" font-weight="bold">Регионом</text>
                    </g>
                </svg>
            </div>
            <p>Прыгайте по платформам и достигните 100 прыжков!</p>
            <button id="start-btn">НАЧАТЬ ИГРУ</button>
        </div>
        
        <div id="win-screen" style="display: none;">
            <h1>ПОБЕДА!</h1>
            <p>Вы достигли цели в 100 прыжков!</p>
            <div class="stat">
                <span>Итоговый счет:</span>
                <span class="stat-value" id="final-score">0</span>
            </div>
            <div class="stat">
                <span>Прыжки:</span>
                <span class="stat-value">100 / 100</span>
            </div>
            <button id="restart-btn-win">СЫГРАТЬ ЕЩЕ РАЗ</button>
        </div>
        
        <div id="game-over-screen" style="display: none;">
            <h1>ИГРА ОКОНЧЕНА</h1>
            <p>Вы были на пути к успеху!</p>
            <div class="stat">
                <span>Прыжки:</span>
                <span class="stat-value" id="jumps-count">0</span>
                <span>/ 100</span>
            </div>
            <div class="stat">
                <span>Набрано очков:</span>
                <span class="stat-value" id="final-score-over">0</span>
            </div>
            <button id="restart-btn-over">ПОПРОБОВАТЬ СНОВА</button>
        </div>
    </div>

    <script>
        // Элементы игры
        const gameContainer = document.getElementById('game-container');
        const player = document.getElementById('player');
        const scoreDisplay = document.getElementById('score');
        const startScreen = document.getElementById('start-screen');
        const winScreen = document.getElementById('win-screen');
        const gameOverScreen = document.getElementById('game-over-screen');
        const startBtn = document.getElementById('start-btn');
        const restartBtnWin = document.getElementById('restart-btn-win');
        const restartBtnOver = document.getElementById('restart-btn-over');
        const leftBtn = document.getElementById('left-btn');
        const rightBtn = document.getElementById('right-btn');
        const finalScoreDisplay = document.getElementById('final-score');
        const finalScoreOverDisplay = document.getElementById('final-score-over');
        const jumpsCountDisplay = document.getElementById('jumps-count');
        const progressBar = document.getElementById('progress-bar');
        const confettiContainer = document.getElementById('confetti');
        const backgroundParticles = document.getElementById('background-particles');

        // Состояние игры
        let gameWidth, gameHeight;
        let playerX, playerY, playerWidth, playerHeight;
        let playerSpeedX = 0;
        let playerSpeedY = 0;
        let gravity = 0.4;
        let jumpForce = -12;
        let platforms = [];
        let score = 0;
        let jumpCount = 0;
        let maxJumps = 100;
        let isJumping = false;
        let isGameOver = false;
        let gameRunning = false;
        let animationFrame;
        let particles = [];
        
        // Создание фоновых частиц
        function createBackgroundParticles() {
            backgroundParticles.innerHTML = '';
            
            for (let i = 0; i < 20; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                
                const size = Math.random() * 5 + 2;
                const posX = Math.random() * gameWidth;
                const posY = Math.random() * gameHeight;
                const opacity = Math.random() * 0.5 + 0.1;
                
                particle.style.width = size + 'px';
                particle.style.height = size + 'px';
                particle.style.left = posX + 'px';
                particle.style.top = posY + 'px';
                particle.style.opacity = opacity;
                
                backgroundParticles.appendChild(particle);
                
                particles.push({
                    element: particle,
                    x: posX,
                    y: posY,
                    speedY: Math.random() * 0.5 + 0.1,
                    size: size
                });
            }
        }
        
        // Анимация фоновых частиц
        function animateParticles() {
            for (let particle of particles) {
                particle.y += particle.speedY;
                
                if (particle.y > gameHeight) {
                    particle.y = -particle.size;
                    particle.x = Math.random() * gameWidth;
                }
                
                particle.element.style.top = particle.y + 'px';
            }
            
            if (gameRunning) {
                requestAnimationFrame(animateParticles);
            }
        }
        
        // Создание конфетти при победе
        function createConfetti() {
            confettiContainer.innerHTML = '';
            
            const colors = ['#45d5ad', '#06b6d4', '#ffffff', '#2563eb'];
            
            for (let i = 0; i < 100; i++) {
                setTimeout(() => {
                    if (!document.body.contains(confettiContainer)) return;
                    
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti-piece';
                    
                    const size = Math.random() * 10 + 5;
                    const posX = Math.random() * gameWidth;
                    const color = colors[Math.floor(Math.random() * colors.length)];
                    
                    confetti.style.width = size + 'px';
                    confetti.style.height = size + 'px';
                    confetti.style.left = posX + 'px';
                    confetti.style.backgroundColor = color;
                    confetti.style.transform = `rotate(${Math.random() * 360}deg)`;
                    
                    confettiContainer.appendChild(confetti);
                    
                    // Анимация падения
                    let posY = -20;
                    let opacity = 1;
                    let speedY = Math.random() * 2 + 1;
                    let speedX = (Math.random() - 0.5) * 2;
                    
                    function animateConfetti() {
                        if (!document.body.contains(confetti)) return;
                        
                        posY += speedY;
                        posX += speedX;
                        
                        if (posY > gameHeight) {
                            confetti.remove();
                            return;
                        }
                        
                        if (posY > gameHeight - 100) {
                            opacity -= 0.02;
                            confetti.style.opacity = opacity;
                        }
                        
                        confetti.style.top = posY + 'px';
                        confetti.style.left = posX + 'px';
                        
                        requestAnimationFrame(animateConfetti);
                    }
                    
                    confetti.style.opacity = '1';
                    animateConfetti();
                    
                }, Math.random() * 2000);
            }
        }
        
        // Обработчики кнопок
        startBtn.addEventListener('click', startGame);
        restartBtnWin.addEventListener('click', startGame);
        restartBtnOver.addEventListener('click', startGame);
        
        // Мобильное управление (касание)
        leftBtn.addEventListener('touchstart', () => movePlayer(-6));
        leftBtn.addEventListener('touchend', () => movePlayer(0));
        rightBtn.addEventListener('touchstart', () => movePlayer(6));
        rightBtn.addEventListener('touchend', () => movePlayer(0));
        
        // Клавиатурное управление
        document.addEventListener('keydown', (e) => {
            if (!gameRunning) return;
            
            if (e.key === 'ArrowLeft') {
                movePlayer(-6);
            } else if (e.key === 'ArrowRight') {
                movePlayer(6);
            }
        });
        
        document.addEventListener('keyup', (e) => {
            if (e.key === 'ArrowLeft' || e.key === 'ArrowRight') {
                movePlayer(0);
            }
        });
        
        // Управление движением игрока
        function movePlayer(speed) {
            playerSpeedX = speed;
            
            // Эффект наклона при движении
            if (speed < 0) {
                player.style.transform = 'rotate(-5deg)';
            } else if (speed > 0) {
                player.style.transform = 'rotate(5deg)';
            } else {
                player.style.transform = 'rotate(0deg)';
            }
        }
        
        // Инициализация игры
        function initGame() {
            gameWidth = gameContainer.clientWidth;
            gameHeight = gameContainer.clientHeight;
            
            playerWidth = 40;
            playerHeight = 40;
            playerX = gameWidth / 2 - playerWidth / 2;
            playerY = gameHeight - 200;
            
            player.style.width = playerWidth + 'px';
            player.style.height = playerHeight + 'px';
            
            // Создаем начальные платформы
            platforms = [];
            
            // Начальная платформа под игроком
            createPlatform(gameWidth / 2 - 75, gameHeight - 150, 150);
            
            // Добавляем еще платформ
            for (let i = 0; i < 10; i++) {
                createRandomPlatform();
            }
            
            // Создаем фоновые частицы
            createBackgroundParticles();
            
            updatePlayerPosition();
            animateParticles();
        }
        
        // Создание платформы
        function createPlatform(x, y, width) {
            const platform = document.createElement('div');
            platform.className = 'platform';
            platform.style.width = width + 'px';
            platform.style.left = x + 'px';
            platform.style.top = y + 'px';
            gameContainer.appendChild(platform);
            
            platforms.push({
                element: platform,
                x: x,
                y: y,
                width: width
            });
        }
        
        // Создание случайной платформы
        function createRandomPlatform() {
            const platformWidth = Math.random() * 80 + 70; // 70-150px
            const platformX = Math.random() * (gameWidth - platformWidth);
            
            // Определяем высоту для новой платформы
            let platformY;
            if (platforms.length > 0) {
                const highestPlatform = platforms.reduce((prev, curr) => 
                    prev.y < curr.y ? prev : curr
                );
                platformY = highestPlatform.y - Math.random() * 100 - 50;
            } else {
                platformY = gameHeight - 200;
            }
            
            createPlatform(platformX, platformY, platformWidth);
        }
        
        // Обновление позиции игрока
        function updatePlayerPosition() {
            playerX += playerSpeedX;
            
            // Ограничение по горизонтали с эффектом перехода через край
            if (playerX < -playerWidth) {
                playerX = gameWidth;
            }
            if (playerX > gameWidth) {
                playerX = -playerWidth;
            }
            
            playerSpeedY += gravity;
            playerY += playerSpeedY;
            
            // Проверка столкновений с платформами
            if (playerSpeedY > 0) { // Только когда игрок падает
                for (let platform of platforms) {
                    if (
                        playerY + playerHeight > platform.y && 
                        playerY + playerHeight < platform.y + 20 &&
                        playerX + playerWidth > platform.x && 
                        playerX < platform.x + platform.width
                    ) {
                        if (!isJumping) {
                            playerSpeedY = jumpForce;
                            jumpCount++;
                            
                            // Обновляем прогресс-бар
                            progressBar.style.width = (jumpCount / maxJumps * 100) + '%';
                            
                            // Проверка достижения цели
                            if (jumpCount >= maxJumps) {
                                gameWin();
                                return;
                            }
                            
                            // Увеличиваем счет
                            score += 10;
                            updateScore();
                            
                            isJumping = true;
                            setTimeout(() => {
                                isJumping = false;
                            }, 200);
                        }
                    }
                }
            }
            
            // Проверка на поражение (падение вниз)
            if (playerY > gameHeight) {
                gameOver();
                return;
            }
            
            // Обновление камеры (скроллинг)
            if (playerY < gameHeight / 2) {
                const diff = gameHeight / 2 - playerY;
                playerY = gameHeight / 2;
                
                // Перемещаем платформы вниз
                for (let platform of platforms) {
                    platform.y += diff;
                    platform.element.style.top = platform.y + 'px';
                    
                    // Удаление платформ, которые ушли за пределы экрана
                    if (platform.y > gameHeight) {
                        gameContainer.removeChild(platform.element);
                        platforms = platforms.filter(p => p !== platform);
                        createRandomPlatform();
                    }
                }
            }
            
            // Применяем позицию к элементу игрока
            player.style.left = playerX + 'px';
            player.style.top = playerY + 'px';
            
            // Продолжаем анимацию, если игра не завершена
            if (gameRunning) {
                animationFrame = requestAnimationFrame(updatePlayerPosition);
            }
        }
        
        // Обновление счета
        function updateScore() {
            scoreDisplay.textContent = `Очки: ${score} | Прыжки: ${jumpCount}/${maxJumps}`;
        }
        
        // Старт игры
        function startGame() {
            // Очищаем старые платформы
            platforms.forEach(platform => {
                if (platform.element) {
                    gameContainer.removeChild(platform.element);
                }
            });
            
            // Сбрасываем переменные
            score = 0;
            jumpCount = 0;
            isGameOver = false;
            gameRunning = true;
            
            // Сбрасываем прогресс-бар
            progressBar.style.width = '0%';
            
            // Скрываем экраны
            startScreen.style.display = 'none';
            winScreen.style.display = 'none';
            gameOverScreen.style.display = 'none';
            
            // Очищаем конфетти
            confettiContainer.innerHTML = '';
            
            // Обновляем счет
            updateScore();
            
            // Инициализируем игру
            initGame();
            
            // Запускаем игровой цикл
            if (animationFrame) {
                cancelAnimationFrame(animationFrame);
            }
            animationFrame = requestAnimationFrame(updatePlayerPosition);
        }
        
        // Победа в игре
        function gameWin() {
            gameRunning = false;
            finalScoreDisplay.textContent = score;
            winScreen.style.display = 'flex';
            createConfetti();
        }
        
        // Проигрыш
        function gameOver() {
            gameRunning = false;
            isGameOver = true;
            jumpsCountDisplay.textContent = jumpCount;
            finalScoreOverDisplay.textContent = score;
            gameOverScreen.style.display = 'flex';
        }
        
        // Инициализация при загрузке страницы
        window.addEventListener('load', () => {
            initGame();
        });
        
        // Обработка изменения размера окна
        window.addEventListener('resize', () => {
            if (gameRunning) {
                gameWidth = gameContainer.clientWidth;
                gameHeight = gameContainer.clientHeight;
            }
        });
    </script>
</body>
</html>
